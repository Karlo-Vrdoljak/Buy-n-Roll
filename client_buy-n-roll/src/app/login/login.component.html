<app-breadcrumbs *ngIf="displayAccessories" [breadcrumbs]="breadcrumbs"></app-breadcrumbs>
<div *ngIf="displayAccessories" class="banner"></div>
<div [ngClass]="{'no-accessories': displayAccessories == false }">
  <div class="p-grid p-nogutter">
    <div class="p-col">
      <div class="flex wrap justify-center" [ngsReveal]="{reset: true, delay: 50  }">
        <div [ngClass]="{'registrationForm-normal': displayAccessories, 'registrationForm-reduced': !displayAccessories}" style="height: fit-content;" class="bg-gray-100  contentWrap mt-4 lg:max-w-lg sm:mx-8 md:mx-24 lg:mx-48 xl:64 mx-2 border border-gray-300 rounded overflow-hidden shadow-md relative z-0">
          <div (keyup.enter)="keyUp.next($event)" class="px-8 pt-6 pb-8 mb-4">
            <div class="mb-4 relative" [ngsReveal]="{reset: true, origin: 'right', distance: '60px', delay: 200  }">
              <div class="flex">
                <div class="flex flex-col justify-center items-center">
                  <i class="text-normal fas fa-user-tie text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
                </div>
                <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
                  <mat-label class="font-oswald">{{ 'USERNAME' | translate }}</mat-label>
                  <input (keyup)="error = null;" matInput type="text" [(ngModel)]="username" placeholder="{{ 'USERNAME_PLACEHOLDER' | translate}}" class="overflow-hidden font-oswald">
                </mat-form-field>
              </div>
              <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.username | translate }}</p>
            </div>
            <div class="mb-6 relative" [ngsReveal]="{reset: true, origin: 'right', distance: '60px', delay: 350  }">
              <div class="flex">
                <div class="flex flex-col justify-center items-center">
                  <i class="text-normal fas fa-key text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
                </div>
                <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
                  <mat-label class="font-oswald">{{ 'PASSWORD' | translate }}</mat-label>
                  <input (keyup)="error = null;" matInput type="password" [(ngModel)]="password" placeholder="{{ 'PASSWORD_PLACEHOLDER' | translate }}" class="overflow-hidden font-oswald">
                </mat-form-field>
              </div>
              <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.password | translate }}</p>
            </div>
            <div class="flex items-center justify-between flex-row flex-wrap">
              <button [ngsReveal]="{reset: true, origin: 'left', distance: '60px', delay: 200  }" mat-raised-button color="accent" class="w-full sm:w-1/2 transition-colors duration-150 ease-in" [ngClass]="{'bg_error': error}" (click)="login()">
                <div class="flex items-center align-middle justify-center">
                  <i class="fas fa-sign-in-alt pr-2 text-yellow-800 text-xl"></i>
                  {{ 'SIGNIN' | translate }}
                </div>
              </button>
              <div [ngsReveal]="{reset: true, origin: 'right', distance: '60px', delay: 200  }" class="mt-2 sm:mt-0 w-full sm:w-1/2 pl-0 sm:pl-2">
                <a mat-button color="accent" class="mat-focus-indicator mat-button mat-button-base mat-accent bg-orange-100 w-full">
                  <div class="flex items-center align-middle">
                    <i class="fas fa-user-lock text-yellow-800 text-xl" style="flex-basis: 15%;"></i>
                    <div style="flex-basis: 85%;">{{ 'FORGOTPW' | translate }}</div>
                  </div>
                </a>
              </div>
              <div class=" my-2 w-full">
                <mat-divider></mat-divider>
              </div>
              <div [ngsReveal]="{reset: true, origin: 'bottom', distance: '60px', delay: 200  }" class="sm:mt-0 w-full">
                <a [routerLink]="['/registration']" mat-button color="accent" class="mat-focus-indicator mat-button mat-button-base mat-accent w-full bg-orange-100">
                  <div class="flex items-center align-middle">
                    <span class="fa-stack" style="flex-basis: 15%;">
                      <i class="fas fa-car pl-1 fa-stack-2x buynroll_deepGray"></i>
                      <i class="fas fa-key fa-stack-1x pr-2 text-lg text-indigo-300"></i>
                    </span>
                    <div style="flex-basis: 85%;">{{ 'REGISTERNOW' | translate }}</div>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <ngx-ui-loader [loaderId]="'login_loader'"></ngx-ui-loader>
        </div>
      </div>
    </div>
  </div>
</div>

<app-acc-confirm #confirmAcc *ngIf="username && needsActivation == true" [username]="username" (onConfirm)="login($event)"></app-acc-confirm>
