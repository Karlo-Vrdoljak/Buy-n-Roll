<app-breadcrumbs *ngIf="displayAccessories" [breadcrumbs]="breadcrumbs"></app-breadcrumbs>
<div *ngIf="displayAccessories" class="banner"></div>
<div [ngClass]="{'no-accessories': displayAccessories == false }">
  <div class="p-grid p-nogutter">
    <div class="p-col">
      <div class="flex wrap justify-center" [ngsReveal]="{reset: true, origin: 'right'  }">
        <div class="bg-gray-100 contentWrap mt-4 lg:max-w-6xl sm:mx-8 md:mx-24 lg:mx-48 xl:64 mx-2 mb-4 border border-gray-300 rounded overflow-hidden shadow-md relative z-0">
          <div class="px-4 lg:px-8 pt-2 lg:pt-6 pb-4 lg:pb-8 mb-2 lg:mb-4">
            <mat-vertical-stepper>
              <mat-step>
                <ng-template matStepLabel>{{ 'PERSONAL_INFO' | translate }}</ng-template>
                <ng-container *ngTemplateOutlet="stepInfo"></ng-container>
                <div class="pb-2 pt-6">
                  <button mat-raised-button matStepperNext color="accent" class="mat-focus-indicator mat-button mat-button-base mat-accent bg-orange-100">
                    <div class="flex items-center align-middle">
                      <div style="flex-basis: 85%;" class="mr-2 text-sm">NEXT</div>
                      <i class="fas fa-arrow-circle-right text-yellow-800 text-sm" style="flex-basis: 15%;"></i>
                    </div>
                  </button>
                </div>
              </mat-step>
              <mat-step>
                <ng-template matStepLabel>Fill out your address</ng-template>
                <ng-container *ngTemplateOutlet="stepKontakt"></ng-container>
                <div class="pb-2 pt-6 flex items-center">
                  <div class="mr-2">
                    <button mat-raised-button matStepperPrevious color="accent" class="mat-focus-indicator mat-button mat-button-base mat-accent bg-orange-100">
                      <div class="flex items-center align-middle">
                        <i class="fas fa-arrow-circle-left text-yellow-800 text-sm mr-2" style="flex-basis: 15%;"></i>
                        <div style="flex-basis: 85%;" class="text-sm">PREV</div>
                      </div>
                    </button>
                  </div>
                  <button mat-raised-button matStepperNext color="accent" class="mat-focus-indicator mat-button mat-button-base mat-accent bg-orange-100">
                    <div class="flex items-center align-middle">
                      <div style="flex-basis: 85%;" class="mr-2 text-sm">NEXT</div>
                      <i class="fas fa-arrow-circle-right text-yellow-800 text-sm" style="flex-basis: 15%;"></i>
                    </div>
                  </button>
                </div>
              </mat-step>
              <mat-step>
                <ng-template matStepLabel>Done</ng-template>
                <ng-container *ngTemplateOutlet="stepCreds"></ng-container>
              </mat-step>
            </mat-vertical-stepper>
          </div>
          <ngx-ui-loader [loaderId]="'registration_loader'"></ngx-ui-loader>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #stepInfo>
  <div class="p-grid p-nogutter">
    <div class="p-col-12 p-sm-12 p-md-6 p-lg-6 p-xl-6 step-wrap">
      <div class="relative">
        <div class="flex">
          <div class="flex flex-col justify-center items-center">
            <i class="text-normal fas fa-user-tie text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
          </div>
          <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
            <mat-label class="font-oswald">{{ 'NAME' | translate }}</mat-label>
            <input required (keyup)="error = null;" matInput type="text" [(ngModel)]="userModel.firstName" placeholder="{{ 'NAME_PLACEHOLDER' | translate}}" class="overflow-hidden font-oswald">
          </mat-form-field>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.firstName | translate }}</p>
      </div>
    </div>
    <div class="p-col-12 p-sm-12 p-md-6 p-lg-6 p-xl-6 step-wrap">
      <div class="relative">
        <div class="flex">
          <div class="flex flex-col justify-center items-center">
            <i class="text-normal fas fa-user-tie text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
          </div>
          <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
            <mat-label class="font-oswald">{{ 'LASTNAME' | translate }}</mat-label>
            <input required (keyup)="error = null;" matInput type="text" [(ngModel)]="userModel.firstName" placeholder="{{ 'LASTNAME_PLACEHOLDER' | translate}}" class="overflow-hidden font-oswald">
          </mat-form-field>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.firstName | translate }}</p>
      </div>
    </div>
    <div class="p-col-12 p-sm-12 p-md-6 p-lg-6 p-xl-6 step-wrap">
      <div class="relative">
        <div class="flex justify-center">
          <div style="width: 100%;">
            <div class="text-xl text-gray-800 font-oswald">{{ 'VRSTAPRODAVACA' | translate }} <span class="align-middle">*</span></div>
          </div>
        </div>
        <div class="flex justify-center">
          <p-listbox [ngStyle]="{'width': '100%'}" class="shadow-md" [options]="sellerTypes" [(ngModel)]="selectedSellerType" optionLabel="label"></p-listbox>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.firstName | translate }}</p>
      </div>
    </div>

  </div>
</ng-template>

<ng-template #stepKontakt>
  <div class="p-grid p-nogutter">
    <div class="p-col-12 p-sm-12 p-md-6 p-lg-6 p-xl-6 step-wrap">
      <div class="relative">
        <div class="flex">
          <div class="flex flex-col justify-center items-center">
            <i class="text-normal fas fa-user-tie text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
          </div>
          <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
            <mat-label class="font-oswald">{{ 'NAME' | translate }}</mat-label>
            <input required (keyup)="error = null;" matInput type="text" pKeyFilter="int" [(ngModel)]="userModel.firstName" placeholder="{{ 'NAME_PLACEHOLDER' | translate}}" class="overflow-hidden font-oswald">
          </mat-form-field>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.firstName | translate }}</p>
      </div>
    </div>
    <div class="p-col-12 p-sm-12 p-md-6 p-lg-6 p-xl-6 step-wrap">
      <div class="relative">
        <div class="flex">
          <div class="flex flex-col justify-center items-center">
            <i class="text-normal fas fa-user-tie text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
          </div>
          <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
            <mat-label class="font-oswald">{{ 'NAME' | translate }}</mat-label>
            <input required matInput type="email" (keyup)="error = null;" pKeyFilter="email" [(ngModel)]="userModel.email" placeholder="{{ 'NAME_PLACEHOLDER' | translate}}" class="overflow-hidden font-oswald">
          </mat-form-field>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.firstName | translate }}</p>
      </div>
    </div>
  </div>
</ng-template>



<ng-template #stepCreds>
  <div class="p-grid p-nogutter">
    <div class="p-col-12 p-sm-12 p-md-6 p-lg-6 p-xl-6 step-wrap">
      <div class="mb-4 relative">
        <div class="flex">
          <div class="flex flex-col justify-center items-center">
            <i class="text-normal fas fa-user-tie text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
          </div>
          <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
            <mat-label class="font-oswald">{{ 'USERNAME' | translate }}</mat-label>
            <input (keyup)="error = null;" matInput type="text" [(ngModel)]="userModel.username" placeholder="{{ 'USERNAME_PLACEHOLDER' | translate}}" class="overflow-hidden font-oswald">
          </mat-form-field>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.username | translate }}</p>
      </div>
      <div class="mb-4 relative">
        <div class="flex">
          <div class="flex flex-col justify-center items-center">
            <i class="text-normal fas fa-key text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
          </div>
          <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
            <mat-label class="font-oswald">{{ 'PASSWORD' | translate }}</mat-label>
            <input (keyup)="error = null;" matInput type="password" [(ngModel)]="userModel.password" placeholder="{{ 'PASSWORD_PLACEHOLDER' | translate }}" class="overflow-hidden font-oswald">
          </mat-form-field>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.password | translate }}</p>
      </div>
      <div class="mb-4 relative">
        <div class="flex">
          <div class="flex flex-col justify-center items-center">
            <i class="text-normal fas fa-key text-indigo-900 mr-2 select-none" style="flex-basis: 10%;"></i>
          </div>
          <mat-form-field style="flex-basis: 90%; width: 20em;" class="px-2">
            <mat-label class="font-oswald">{{ 'PASSWORD' | translate }}</mat-label>
            <input (keyup)="error = null;" matInput type="password" [(ngModel)]="userModel.passwordCheck" placeholder="{{ 'PASSWORD_PLACEHOLDER_CONFIRM' | translate }}" class="overflow-hidden font-oswald">
          </mat-form-field>
        </div>
        <p *ngIf="error" class="font-mw text-red-500 text-xs absolute" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>{{ error.passwordCheck | translate }}</p>
      </div>
      <div *ngIf="checkSubmitReady()" class="flex items-center justify-between flex-row flex-wrap" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>
        <button mat-raised-button color="accent" class="w-full sm:w-1/2 transition-colors duration-150 ease-in">
          <div class="flex items-center align-middle justify-center">
            <i class="fas fa-sign-in-alt pr-2 text-yellow-800 text-xl"></i>
            {{ 'REGISTERME' | translate }}
          </div>
        </button>
      </div>
    </div>
  </div>
</ng-template>