<p-dialog  #pdialog *ngIf="dialog == true" class="advSearch" [style]="{'min-width': '50vw'}" (onHide)="EmitValue()" [header]="'ADVANCED_SEARCH' | translate | uppercase" closeOnEscape="true" [(visible)]="displayDlg" position="center" [modal]="true" [dismissableMask]="true" [baseZIndex]="999999" [autoZIndex]="false"  [draggable]="false" [resizable]="false">
  <div class="flex flex-col justify-center content-center items-center relative">
    <ng-container [ngTemplateOutlet]="advancedSearch"></ng-container>
    <ngx-ui-loader [loaderId]="'advancedSearch'"></ngx-ui-loader>
  </div>
</p-dialog>

<ng-container *ngIf="dialog == false">
  <div class="flex flex-col justify-center content-center items-center relative">
    <ng-container [ngTemplateOutlet]="advancedSearch"></ng-container>
    <ngx-ui-loader [loaderId]="'advancedSearch'"></ngx-ui-loader>
  </div>
</ng-container>

<ng-template #advancedSearch>
  <div class="absolute right-0">
    <button *ngIf="checkCanSubmit()" (click)="setSearchValues()" mat-fab color="accent" [@fadeInRightOnEnter] [@fadeOutLeftOnLeave]>
      <span class="fa-stack">
        <i class="fas fa-car pl-1 fa-stack-2x buynroll_deepGray"></i>
        <i class="fas fa-search fa-stack-1x fa-2x pr-2 fa-inverse"></i>
      </span>
    </button>
  </div>
  <div class="flex flex-row items-center w-full content-center justify-center text-2xl font-semibold font-oswald relative">
    {{ 'SPECIFICATION' | translate | titlecase}}
  </div>
  <div class="divider div-light w-full pb-2"></div>
  <div class="p-grid p-nogutter w-full">
    <div class="p-col-12 p-sm-12 p-md-12 p-xl-6 w-full">
      <div class="w-full flex flex-col items-center content-center justify-center">
        <div class="pb-2">
          <h6>{{ 'COLOR' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" [virtualScroll]="true" itemSize="20" [options]="advancedSearchProps.Colors" [(ngModel)]="searchModel.Colors" optionLabel="color">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString(item.label,15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | titlecase }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="pb-2">
          <h6>{{ 'BODY' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" [virtualScroll]="true" itemSize="20" [options]="advancedSearchProps.Body" [(ngModel)]="searchModel.Body" optionLabel="bodyName">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString((item.label | translate | titlecase ),15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | translate | titlecase }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="pb-2">
          <h6>{{ 'DRIVETRAIN' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" [virtualScroll]="true" itemSize="20" [options]="advancedSearchProps.DriveTrain" [(ngModel)]="searchModel.DriveTrain" optionLabel="drivetrainCode">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString((item.label | uppercase ),15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | uppercase }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="pb-2">
          <h6>{{ 'GAS_TYPE' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" [virtualScroll]="true" itemSize="20" [options]="advancedSearchProps.GasType" [(ngModel)]="searchModel.GasType" optionLabel="gasType">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString((item.label | translate ),15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | translate }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="pb-2">
          <h6>{{ 'TRANSMISSION' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" [virtualScroll]="true" itemSize="20" [options]="advancedSearchProps.Transmission" [(ngModel)]="searchModel.Transmission" optionLabel="transmissionName">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString((item.label | translate ),15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | translate }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
      </div>
    </div>
    <div class="p-col-12 p-sm-12 p-md-12 p-xl-6 w-full" style="min-height: 16rem;">
      <div class="w-full flex flex-col items-center content-center justify-center">
        <div class="pb-2">
          <h6>{{ 'VEHICLE_STATE' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" [virtualScroll]="true" itemSize="20" [options]="advancedSearchProps.VehicleState" [(ngModel)]="searchModel.VehicleState" optionLabel="vehicleState">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString((item.label | translate | titlecase ),15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | translate  | titlecase}}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="pb-2">
          <h6>{{ 'MANUFACTURER' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" (onChange)="getSeriesData($event)" *ngIf="manufacturers" [virtualScroll]="true" itemSize="20" [options]="manufacturers" [(ngModel)]="selectedManufacturer" optionLabel="manufacturerName">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString(item.label,15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | titlecase }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="pb-2" [@fadeInUpOnEnter] *ngIf="series">
          <h6>{{ 'SERIJA' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" (onChange)="getModelData($event)" [virtualScroll]="true" itemSize="20" [options]="series" [(ngModel)]="selectedSeries" optionLabel="seriesName">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString(item.label,15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | titlecase }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
        <div class="pb-2" [@fadeInUpOnEnter] *ngIf="models">
          <h6>{{ 'MODEL' | translate | titlecase }}</h6>
          <p-dropdown [showClear]="true" appendTo="body"  [placeholder]="'ODABERITE' | translate" filter="true" (onChange)="selectModel($event)" [virtualScroll]="true" itemSize="20" [options]="models" [(ngModel)]="selectedModel" optionLabel="modelName">
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex flex-row items-center justify-start content-center">
                <span *ngIf="item.label">{{ helperService.truncateString(item.label,15) }}</span>
              </div>
            </ng-template>
            <ng-template let-item pTemplate="item">
              <div class="flex flex-no-wrap flex-row">
                <div class="text-gray-600 font-oswald font-light text-base w-full">
                  {{ item.label | titlecase }}
                </div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
      </div>
    </div>
  </div>
</ng-template>